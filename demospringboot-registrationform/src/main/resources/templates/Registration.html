<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!--<title>Registration Form in HTML CSS</title>-->
    <!---Custom CSS File--->
    <link rel="stylesheet" href="stylelogin.css" />
    <title>Registration page - YashRaj Agro centre</title>
</head>

<body>
    <section class="container">
        <header>Sign-up </header>
        <form action="#" class="form" th:action="@{/registerUser}" th:object="${user}" method="post">
            <div class="column">
                <div class="input-box">
                    <label>Name</label>
                    <input type="text" th:field="*{name}" placeholder="Enter name" id="Name" required minlength="2" maxlength="50" pattern="[A-Za-z]+" autocomplete="off" />
                </div>
                <div class="input-box">
                    <label>UserName</label>
                    <input type="text" th:field="*{username}" placeholder="Enter user name" id="UserName" required minlength="2" maxlength="50" pattern="[A-Za-z]+" autocomplete="off"/>
                </div>
            </div>


            <div class="input-box">
                <label>Email Address</label>
                <input type="email" th:field="*{email}" placeholder="Enter email address" id="emailId" required />
            </div>
            <div class="input-box">
                <label>mobile NO</label>
                <input type="number" th:field="*{phone}" placeholder="Enter Mobile No" id="mobileNo" required pattern="[0-9]{10}" autocomplete="off" />
            </div>




            <div class="column">
                <div class="input-box">
                    <label>Set password</label>
                    <input type="password" th:field="*{password}" placeholder="set password" id="password" required />
                </div>
                <div class="input-box">
                    <label>Re-enter password</label>
                    <input type="password" th:field="*{cpassword}" placeholder="Re-enter password" id="Repass" required />
                </div>
            </div>


            </div>

            <div class="input-box address">

                <div class="column">
                    <div class="select-box" id="SecurityQ">
                        <select>
                            <option hidden>Security Question</option>
                            <option>What is your favourite colour?</option>
                            <option>What is your school name?</option>
                            <option>what was your pet name ?</option>
                            <option>what is your fav uncle's name?</option>
                        </select>
                    </div>
                    <input type="text" placeholder="Answer" id="answer" required />
                </div>

            </div>
            <button onclick="AddNewuser()">Submit</button>

        </form>
        <a th:href="@{/log}"><button style="height: 55px;
            width: 100%;
            color: #fff;
            font-size: 1rem;
            font-weight: 400;
            margin-top: 30px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgb(4, 237, 66);;
            ">Already sign-up</button></a>
    </section>
</body>
<script>
    var firstNameElem = document.getElementById("Name");
    var lastNameElem = document.getElementById("UserName");
    var emailElem = document.getElementById("emailId");
    var mobileNoElem = document.getElementById("mobileNo");
    var userNameElem = document.getElementById("userName");
    var passwordElem = document.getElementById("password");
    var RepassElem = document.getElementById("Repass");
    var SecurityQElem = document.getElementById("SecurityQ");
    var answerElem = document.getElementById("answer");


    function adduser() {
        var User = {
            firstName: firstNameElem.value,
            lastName: lastNameElem.value,
            emailId: emailElem.value,
            mobileNo: mobileNoElem.value,

            userName: userNameElem.value,
            password: passwordElem.value,
            Repass: RepassElem.value,
            SecurityQ: SecurityQElem.value,
            answer: answerElem.value


        };
        fetch("http://localhost:4200/User/Register", {
            method: "post",
            headers: {
                'content-type': 'application/json'
            },
            body: JSON.stringify(User)
        }).then((response) => {
            console.log(response);
            alert('Registration Successful');
            response.redirected();
        }).catch(error => {
            alert('try again')
            console.error(error);
        });
    }
</script>

</html>